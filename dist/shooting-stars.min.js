(function(){var t,i,e,o,r;i=function(t,i,e,o,r,n,s,a,h,l){var d;return d=this,d.x=a,d.y=h,d.size=t,d.color=s,d.border=n,d.outerRad=o,d.innerRad=r,d.rotation=i,d.points=e,d.opacity=0,d.scale=0,d.vx=2*Math.random()-1,d.vy=2*Math.random()-1,d.life=0,d.ss=l,d},i.prototype.update=function(){var t,i,e,o;return this.x+=this.vx,this.y+=this.vy,t=this.ss.canvas,i=this.ss.maxLife,e=this.ss.particlePool,o=this.ss.particles,this.opacity<1&&this.life<i/6&&(this.opacity+=100/(i/6)/100,this.scale+=100/(i/6)/100),this.life++,i-this.life<i/6&&(this.scale-=100/(i/6)/100),i-this.life<i/3?(this.vy*=1.075,this.vx*=1.075,this.opacity=(i-this.life)/100):this.life%2===0&&this.rotation++,this.life>=i&&(this.life=0,this.scale=0,this.x=Math.floor(Math.random()*t.width+1),this.y=Math.floor(Math.random()*t.height+1),this.vx=Math.random()-.5,this.vy=Math.random()-.5,self.vx=2*Math.random()-1,self.vy=2*Math.random()-1,e.push(o.shift())),this},i.prototype.render=function(t){var i,e,o,r,n,s;for(r=this,n=document.createElement("canvas"),n.width=r.size,n.height=r.size,s=n.getContext("2d"),s.save(),s.fillStyle=r.color,s.strokeStyle=r.border,s.globalAlpha=r.opacity,s.translate(r.size/2,r.size/2),s.rotate(r.rotation*Math.PI/180),s.translate(-(r.size/2),-(r.size/2)),s.scale(r.scale,r.scale),s.beginPath(),i=0;i<=2*r.points;)o=i*Math.PI/r.points,e=i%2===0?r.outerRad:r.innerRad,s.lineTo(r.size/2+e*Math.cos(o),r.size/2+e*Math.sin(o)),++i;return s.fill(),s.stroke(),s.restore(),t.drawImage(n,r.x,r.y)},e=function(t,i){var e;return e=void 0,e=void 0,function(){var o,r;return o=void 0,r=void 0,r=this,o=arguments,clearTimeout(e),e=setTimeout(function(){return t.apply(r,o)},i)}},o=function(t,i){var e;for(e in i)i.hasOwnProperty(e)&&void 0!==i[e]&&(t[e]=i[e]);return t},r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},window.ShootingStars=t=function(t){var i,r,n,s;return s=this,r=t.id,n={particleLife:300,amount:5,resizePoll:250,star:{size:{upper:50,lower:25},rotateLimit:45,points:5,innerRadius:.5,borderColor:"#000",fillColor:"red"}},s.options=o(n,t),s.canvas=i=document.getElementById(r),i.width=window.innerWidth,i.height=window.innerHeight,i.ctx=i.getContext("2d"),s.maxLife=s.options.particleLife,s.particles=[],s.particlePool=[],s.poolSize=s.options.amount,window.addEventListener("resize",e(function(){s.canvas.width=window.innerWidth,s.canvas.height=window.innerHeight,s.flushPool()},s.options.resizePoll)),s},t.prototype.flushPool=function(){var t,e,o,r,n,s,a,h,l,d;for(l=this,t=l.canvas,r=l.particlePool=[],n=l.particles=[],s=self.poolSize=l.options.amount,t.width<450&&(s=self.poolSize=s/2),o=0,d=[];s>o;)e=function(t,i){return Math.floor(Math.random()*(t-i+1)+i)},h=e(l.options.star.size.upper,l.options.star.size.lower),a=e(l.options.star.rotateLimit,0),r.push(new i(h,a,5,h/2,h/2*l.options.star.innerRadius,this.options.star.borderColor,this.options.star.fillColor,Math.floor(Math.random()*t.width+1),Math.floor(Math.random()*t.height+1),l)),d.push(o++);return d},t.prototype.render=function(){var t,i,e,o,n,s;for(s=this,t=s.canvas,i=t.ctx,o=s.particlePool,n=s.particles,i.save(),i.clearRect(0,0,t.width,t.height),Math.random()>.95&&n.length<s.poolSize&&o.length>0&&n.push(o.shift()),e=0;e<n.length;)n[e].update(),n[e]&&n[e].render(i),e++;return i.restore(),r(function(){return s.render()})}}).call(this);