(function(){var t,i,e,o,r;i=function(t,i,e,o,r,n,a,s,h,l){var d;return d=this,d.x=s,d.y=h,d.size=t,d.color=a,d.border=n,d.outerRad=o,d.innerRad=r,d.rotation=i,d.points=e,d.opacity=0,d.scale=0,d.vx=2*Math.random()-1,d.vy=2*Math.random()-1,d.life=0,d.ss=l,d},i.prototype.update=function(){var t,i,e,o;return this.x+=this.vx,this.y+=this.vy,t=this.ss.canvas,i=this.ss.maxLife,e=this.ss.particlePool,o=this.ss.particles,this.opacity<1&&this.life<i/6&&(this.opacity+=100/(i/6)/100,this.scale+=100/(i/6)/100),this.life++,i-this.life<i/6&&(this.scale-=100/(i/6)/100),i-this.life<i/3?(this.vy*=1.075,this.vx*=1.075,this.opacity=(i-this.life)/100):this.life%2===0&&this.rotation++,this.life>=i&&(this.life=0,this.scale=0,this.x=Math.floor(Math.random()*t.width+1),this.y=Math.floor(Math.random()*t.height+1),this.vx=Math.random()-.5,this.vy=Math.random()-.5,self.vx=2*Math.random()-1,self.vy=2*Math.random()-1,e.push(o.shift())),this},i.prototype.render=function(t){var i,e,o,r,n,a;for(r=this,n=document.createElement("canvas"),n.width=r.size,n.height=r.size,a=n.getContext("2d"),a.save(),a.fillStyle=r.color,a.strokeStyle=r.border,a.globalAlpha=r.opacity,a.translate(r.size/2,r.size/2),a.rotate(r.rotation*Math.PI/180),a.translate(-(r.size/2),-(r.size/2)),a.scale(r.scale,r.scale),a.beginPath(),i=0;i<=2*r.points;)o=i*Math.PI/r.points,e=i%2===0?r.outerRad:r.innerRad,a.lineTo(r.size/2+e*Math.cos(o),r.size/2+e*Math.sin(o)),++i;return a.fill(),a.stroke(),a.restore(),t.drawImage(n,r.x,r.y)},e=function(t,i){var e;return e=void 0,e=void 0,function(){var o,r;return o=void 0,r=void 0,r=this,o=arguments,clearTimeout(e),e=setTimeout(function(){return t.apply(r,o)},i)}},o=function(t,i){var e;for(e in i)i.hasOwnProperty(e)&&void 0!==i[e]&&(t[e]=i[e]);return t},r=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},window.ShootingStars=t=function(t){var i,r,n,a;return a=this,r=t.id,n={particleLife:300,particleRenderProbability:.05,amount:5,resizePoll:250,star:{size:{upper:50,lower:25},rotateLimit:45,points:5,innerRadius:.5,borderColor:"#000",fillColor:"red"}},a.options=o(n,t),a.canvas=i=document.getElementById(r),i.width=window.innerWidth,i.height=window.innerHeight,i.ctx=i.getContext("2d"),a.maxLife=a.options.particleLife,a.particles=[],a.particlePool=[],a.particleProbability=a.options.particleRenderProbability,a.poolSize=a.options.amount,window.addEventListener("resize",e(function(){a.canvas.width=window.innerWidth,a.canvas.height=window.innerHeight,a.flushPool()},a.options.resizePoll)),a},t.prototype.flushPool=function(){var t,e,o,r,n,a,s,h,l,d;for(d=this,t=d.canvas,r=d.particlePool=[],n=d.particles=[],a=self.poolSize=d.options.amount,t.width<450&&(a=self.poolSize=a/2),o=0,s=[];a>o;)e=function(t,i){return Math.floor(Math.random()*(t-i+1)+i)},l=e(d.options.star.size.upper,d.options.star.size.lower),h=e(d.options.star.rotateLimit,0),r.push(new i(l,h,5,l/2,l/2*d.options.star.innerRadius,this.options.star.borderColor,this.options.star.fillColor,Math.floor(Math.random()*t.width+1),Math.floor(Math.random()*t.height+1),d)),s.push(o++);return s},t.prototype.render=function(){var t,i,e,o,n,a;for(a=this,t=a.canvas,i=t.ctx,o=a.particlePool,n=a.particles,i.save(),i.clearRect(0,0,t.width,t.height),Math.random()>a.particleProbability&&n.length<a.poolSize&&o.length>0&&n.push(o.shift()),e=0;e<n.length;)n[e].update(),n[e]&&n[e].render(i),e++;return i.restore(),r(function(){return a.render()})}}).call(this);