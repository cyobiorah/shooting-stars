(function(){var t,i,o;i=function(t,i,o,e,s,r,a,n,h,l){var p;return p=this,p.x=n,p.y=h,p.size=t,p.color=a,p.border=r,p.outerRad=e,p.innerRad=s,p.rotation=i,p.points=o,p.opacity=0,p.scale=0,p.vx=2*Math.random()-1,p.vy=2*Math.random()-1,p.life=0,p.ss=l,p},i.prototype.update=function(){var t,i,o,e;return this.x+=this.vx,this.y+=this.vy,t=this.ss.canvas,i=this.ss.maxLife,o=this.ss.particlePool,e=this.ss.particles,this.opacity<1&&this.life<i/6&&(this.opacity+=100/(i/6)/100,this.scale+=100/(i/6)/100),this.life++,i-this.life<i/6&&(this.scale-=100/(i/6)/100),i-this.life<i/3?(this.vy*=1.075,this.vx*=1.075,this.opacity=(i-this.life)/100):this.life%2===0&&this.rotation++,this.life>=i&&(this.life=0,this.scale=0,this.x=Math.floor(Math.random()*t.width+1),this.y=Math.floor(Math.random()*t.height+1),this.vx=Math.random()-.5,this.vy=Math.random()-.5,self.vx=2*Math.random()-1,self.vy=2*Math.random()-1,o.push(e.shift())),this},i.prototype.render=function(t){var i,o,e,s,r,a;for(s=this,r=document.createElement("canvas"),r.width=s.size,r.height=s.size,a=r.getContext("2d"),a.save(),a.fillStyle=s.color,a.strokeStyle=s.border,a.globalAlpha=s.opacity,a.translate(s.size/2,s.size/2),a.rotate(s.rotation*Math.PI/180),a.translate(-(s.size/2),-(s.size/2)),a.scale(s.scale,s.scale),a.beginPath(),i=0;i<=2*s.points;)e=i*Math.PI/s.points,o=i%2===0?s.outerRad:s.innerRad,a.lineTo(s.size/2+o*Math.cos(e),s.size/2+o*Math.sin(e)),++i;return a.fill(),a.stroke(),a.restore(),t.drawImage(r,s.x,s.y)},o=function(t,i){var o;for(o in i)i.hasOwnProperty(o)&&void 0!==i[o]&&(t[o]=i[o]);return t},window.ShootingStars=t=function(t){var i,e,s;return e=t.id,s={particleLife:300,amount:5,star:{size:{upper:50,lower:25},rotateLimit:45,points:5,innerRadius:.5,borderColor:"#000",fillColor:"red"}},this.options=o(s,t),this.canvas=i=document.getElementById(e),i.width=window.innerWidth,i.height=window.innerHeight,i.ctx=i.getContext("2d"),this.maxLife=this.options.particleLife,this.particles=[],this.particlePool=[],this},t.prototype.flushPool=function(){var t,o,e,s,r,a,n,h,l,p;for(p=this,t=p.canvas,s=p.particlePool=[],r=p.particles=[],a=p.options.amount,e=0,n=[];a>e;)o=function(t,i){return Math.floor(Math.random()*(t-i+1)+i)},l=o(p.options.star.size.upper,p.options.star.size.lower),h=o(p.options.star.rotateLimit,0),s.push(new i(l,h,5,l/2,l/2*p.options.star.innerRadius,this.options.star.borderColor,this.options.star.fillColor,Math.floor(Math.random()*t.width+1),Math.floor(Math.random()*t.height+1),p)),n.push(e++);return n},t.prototype.render=function(){var t,i,o,e,s,r;for(r=this,t=r.canvas,i=t.ctx,e=r.particlePool,s=r.particles,i.save(),i.clearRect(0,0,t.width,t.height),Math.random()>.95&&s.length<r.options.amount&&e.length>0&&s.push(e.shift()),o=0;o<s.length;)s[o].update(),s[o]&&s[o].render(i),o++;return i.restore(),requestAnimationFrame(function(){return r.render()})}}).call(this);